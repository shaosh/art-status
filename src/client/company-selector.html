<dom-module id="company-selector">
  <style>
	  paper-item{
	    cursor:pointer;
	  }
	  .dropdown-trigger{
	    font-size:20px;
	  }
	</style>
	
  <template>
    <paper-menu-button>
      <paper-button class="dropdown-trigger">
        <span>{{selectedCompany}}</span>
        <iron-icon icon="expand-more"></iron-icon>
      </paper-button>
      <paper-menu class="dropdown-content" selected="{{selectedIndex}}">
        <template is="dom-repeat" items="[[companies]]">
          <paper-item>[[item.name]]</paper-item>
        </template>
      </paper-menu>
    </paper-menu-button>
  </template>
  <script>
    
    Polymer({
      is: 'company-selector',
      
      properties:{
        selectedCompany:{
          type: String,
          value: ''
        },
        
        selectedIndex:{
          type: Number,
          notify: true,
          observer: '_updateCompany'
        },
        
        companies:{
          type: Array,
          value: []
        }
      },
      
      ready: function(){
        this._initCompanies();
        if(this.companies.length !== 0){
          for(var i = 0; i < this.companies.length; i++){
            if(window.location.href.indexOf(this.companies[i].name.toLowerCase()) > -1){
              this.selectedIndex = i;
              return;
            }
          }
          this.selectedIndex = 0;
        }
      },
      
      //TODO: hardcode to ajax calls
      _initCompanies: function(){
        this.push('companies', {name: 'DesignAShirt.com'});
        this.push('companies', {name: 'AntonSports.com'});
      },
      
      _updateCompany: function(newValue, oldValue){
        this.selectedCompany = this.companies[newValue].name;
      }
    });
  </script>
</dom-module>
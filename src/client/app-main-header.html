<dom-module id="app-main-header">
  <style>
    .header-wrapper{
      width:100%;
    }
    .otherviewer{
      text-align: center;
      font-style: italic;
      color: #8A97DC;
    }
    .subtitle{
      color: #B4BDEF;
    }
    paper-toolbar{
      background-color: #5E6FC7;
      padding: 20px;
    }
    paper-tab{
      background-color: #EEE;
    }
    paper-tab iron-icon{
      color: #767676;
    }
    paper-tabs paper-tab.iron-selected {
      color: #5A5A5A;
      background-color: #BDBDBD;
    }
  </style>
  <template>
    <paper-toolbar class="medium-tall">
      <div class="header-wrapper">
        <div class="otherviewer">XXX is also viewing</div>
        <div class="title">{{jobname}}</div>
        <div class="subtitle">{{statusTitle}}</div>
      </div>
    </paper-toolbar>
    <paper-tabs id="funcTab" selected="{{tab}}" no-bar noink>
      <paper-tab>
        <iron-icon icon="communication:message"></iron-icon>
      </paper-tab>
      <paper-tab>
        <iron-icon icon="social:person-add"></iron-icon>
      </paper-tab>
      <paper-tab>
        <iron-icon icon="communication:business"></iron-icon>
      </paper-tab>
      <paper-tab>
        <iron-icon icon="image:brush"></iron-icon>
      </paper-tab>
      <paper-tab>
        <iron-icon icon="file-upload"></iron-icon>
      </paper-tab>
    </paper-tabs>
    <content></content>
  </template>
  
  <script>
    Polymer({
      is: 'app-main-header',
      properties: {
        job: {
          type: Object,
          value: null,
          notify: true,
          observer: 'setJobData'
        },
        jobid: {
          type: String,
          notify: true
        },
        jobname: {
          type: String,
          notify: true
        },
        time: {
          type: String,
          notify: true
        },
        status: {
          type: String,
          notify: true
        },
        assignee: {
          type: String,
          notify: true
        },
        updater: {
          type: String,
          notify: true
        },
        statusTitle: {
          type: String,
          notify: true
        },
        viewurl:{
          type: String,
          notify: true
        },
        tab: {
          type: String,
          notify: true,
          value: 0
        }
      },
      ready: function(){
        var myKey = '9ucmktt493ndyfnp9lvpwmsfky8dmtc7';
        var boxViewLib = require('../../node_modules/node-box-view');
        var boxView = new boxViewLib(myKey);
      },
      setJobData: function(newValue, oldValue){
        if(!!newValue){
          this.jobid = newValue.id;
          this.jobname = newValue.name;
          this.time = moment(newValue.updatedAt).format("MMM DD, YYYY, h:mm:ss a");
          this.assignee = newValue.username;
          this.status = newValue.status;
          this.statusTitle = this.status + '. Updated at ' + this.time; 
        }
      } 
    });
  </script>
</dom-module>
<link rel="import" href="bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="bower_components/paper-button/paper-button.html">
<link rel="import" href="bower_components/iron-icons/iron-icons.html">
<link rel="import" href="bower_components/paper-menu/paper-menu.html">
<link rel="import" href="bower_components/paper-item/paper-item.html">

<dom-module id="company-selector">
  <style>
	  paper-item{
	    cursor:pointer;
	  }
	</style>
	
  <template>
    <paper-menu-button>
      <paper-button class="dropdown-trigger">
        <span class="title">{{selectedCompany}}</span>
        <iron-icon icon="expand-more"></iron-icon>
      </paper-button>
      <paper-menu class="dropdown-content" selected="{{selectedIndex}}">
        <template is="dom-repeat" items="[[companies]]">
          <paper-item>[[item.name]]</paper-item>
        </template>
      </paper-menu>
    </paper-menu-button>
  </template>
  
  <script>
    Polymer({
      is: 'company-selector',
      
      properties:{
        selectedCompany:{
          type: String,
          value: ''
        },
        
        selectedIndex:{
          type: Number,
          notify: true,
          observer: '_updateCompany'
        },
        
        companies:{
          type: Array,
          value: []
        }
      },
      
      ready: function(){
        this._initCompanies();
        if(this.companies.length !== 0){
          this.selectedIndex = 0;
        }
      },
      
      //TODO: hardcode to ajax calls
      _initCompanies: function(){
        this.push('companies', {name: 'DesignAShirt.com'});
        this.push('companies', {name: 'AntonSports.com'});
      },
      
      _updateCompany: function(newValue, oldValue){
        this.selectedCompany = this.companies[newValue].name;
      }
    });
  </script>
</dom-module>